<mvc:View
    controllerName="com.segezha.form.mpr.controller.Home"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form"
    displayBlock="true">
    <Page id="homePageId">
        <customHeader>
            <Toolbar>
                <ToolbarSpacer />
                <Title text="Создание заявки на запрос полномочий" />
                <ToolbarSpacer />
            </Toolbar>
        </customHeader>
        <content>
            <VBox class="sapUiSmallMargin">
                <HBox class="sapUiSmallMarginBottom">
                    <VBox
                        class="sapUiFormResGrid sapUiFormBackgrTranslucent sapUiSmallMarginEnd"
                        width="40%">
                        <!-- N° Заявки -->
                        <HBox justifyContent="Start" alignItems="Center">
                            <VBox width="25%">
                                <Label text="N° Заявки на полномочия" required="false" />
                            </VBox>
                            <VBox width="25%">
                                <Input
                                    value="{Request_data>/RRequest}"
                                    enabled="false"
                                    placeholder="N° Заявки на полномочия" />
                            </VBox>
                            <!-- Статус -->
                            <VBox width="15%">
                                <Label text="Статус" required="false" />
                            </VBox>
                            <VBox width="35%">
                                <Input
                                    value="{Request_data>/Status}"
                                    enabled="false"
                                    placeholder="Автор заявки" />
                            </VBox>
                        </HBox>
                        <!-- Автор заявки -->
                        <HBox justifyContent="Start" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Автор заявки" required="false" />
                            </VBox>
                            <VBox width="25%">
                                <Input
                                    value="{Request_data>/Login}"
                                    enabled="false"
                                    placeholder="Автор заявки" />
                            </VBox>
                            <VBox width="50%">
                                <Input
                                    value="{Request_data>/Login}"
                                    enabled="false"
                                    placeholder="Автор заявки" />
                            </VBox>
                        </HBox>
                        <!-- Тип пользователя -->
                        <HBox justifyContent="Start" alignItems="Center">
                            <RadioButtonGroup
                                id="userTypeGroup"
                                selectedIndex="{path: 'Request_data>/NewUser', formatter: '.formatter.boolToIndex'}"
                                select=".onUserTypeChange"
                                columns="2">
                                <RadioButton text="Существующий пользователь" />
                                <RadioButton text="Новый пользователь" />
                            </RadioButtonGroup>
                        </HBox>
                        <!-- Организация  -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Организация" required="false" />
                            </VBox>
                            <HBox width='25%'>
                                <Input
                                    value="{Request_data>/Bukrs}"
                                    placeholder="Организация" />
                                <Button
                                    icon="sap-icon://search"
                                    press="onSearchBukrs" />
                            </HBox>
                            <VBox width="50%">
                                <Input
                                    value="{Request_data>/Butxt}"
                                    placeholder="Название"
                                    enabled="false" />
                            </VBox>
                        </HBox>
                        <!-- Завод -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Завод" required="false" />
                            </VBox>
                            <HBox width="25%">
                                <Input
                                    value="{Request_data>/Werks}"
                                    placeholder="Завод" />
                                <Button
                                    icon="sap-icon://search"
                                    press="onSearchWerks" />
                            </HBox>
                            <VBox width="50%">
                                <Input
                                    value="{Request_data>/Name1}"
                                    placeholder="Завод"
                                    enabled="false" />
                            </VBox>
                        </HBox>
                        <!-- Период -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Период" required="false" />
                            </VBox>
                            <VBox class="sapMInputBaseCancel" width="75%">
                                <DateRangeSelection
                                    id="dateRangeSelectionId"
                                    displayFormat="dd.MM.yyyy"
                                    value="{
                                    type: 'sap.ui.model.type.DateInterval',
                                    formatOptions: {
                                        pattern: 'dd.MM.yyyy', 
                                        separator: '/'
                                    },
                                    parts: [
                                        {
                                            path: 'Request_data>/DataFrom',
                                            type: 'sap.ui.model.type.Date',
                                            formatOptions: { pattern: 'dd.MM.yyyy' }
                                        },
                                        {
                                            path: 'Request_data>/DataTo',
                                            type: 'sap.ui.model.type.Date',
                                            formatOptions: { pattern: 'dd.MM.yyyy' }
                                        }
                                    ]
                                }" />
                            </VBox>
                        </HBox>
                        <!-- Пользователь -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">

                                <Label text="Пользователь" required="false" />
                            </VBox>
                            <HBox width="25%">
                                <Input
                                    value="{Request_data>/Bname}"
                                    placeholder="Пользователь" />
                                <Button
                                    icon="sap-icon://search"
                                    press="onSearchUser" />
                            </HBox>
                            <VBox width="50%">
                                <Input
                                    value="{
                                    parts: [
                                        'Request_data>/McNamelas',
                                        'Request_data>/McNamefir'
                                    ],
                                    formatter: '.formatter.combineNames'
                                }"
                                    placeholder="Пользователь"
                                    enabled="false" />
                            </VBox>
                        </HBox>
                        <!-- Фамилия -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Фамилия" required="false" />
                            </VBox>
                            <VBox width="75%">
                                <Input
                                    value="{Request_data>/McNamelas}"
                                    enabled="{Request_data>/NewUser}"
                                    placeholder="Фамилия" />
                            </VBox>
                        </HBox>

                        <!-- Имя -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Имя" required="false" />
                            </VBox>
                            <VBox width="75%">
                                <Input
                                    value="{Request_data>/McNamefir}"
                                    enabled="{Request_data>/NewUser}"
                                    placeholder="Имя" />
                            </VBox>
                        </HBox>

                        <!-- Отчество -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Отчество" required="false" />
                            </VBox>
                            <VBox width="75%">
                                <Input
                                    value="{Request_data>/McNamemid}"
                                    enabled="{Request_data>/NewUser}"
                                    placeholder="Отчество" />
                            </VBox>
                        </HBox>

                        <!-- Отдел -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Отдел" required="false" />
                            </VBox>
                            <VBox width="75%">
                                <Input
                                    value="{Request_data>/Department}"
                                    enabled="{Request_data>/NewUser}"
                                    placeholder="Отдел" />
                            </VBox>
                        </HBox>

                        <!-- Должность -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Должность" required="false" />
                            </VBox>
                            <VBox width="75%">
                                <Input
                                    value="{Request_data>/Function}"
                                    enabled="{Request_data>/NewUser}"
                                    placeholder="Должность" />
                            </VBox>
                        </HBox>

                        <!-- Адрес эл. почты -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Адрес эл. почты" required="false" />
                            </VBox>
                            <VBox width="75%">
                                <Input
                                    value="{Request_data>/SmtpAddr}"
                                    type="Email"
                                    enabled="{Request_data>/NewUser}"
                                    placeholder="Адрес эл. почты" />
                            </VBox>
                        </HBox>

                        <!-- Руководитель -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Руководитель" required="false" />
                            </VBox>
                            <HBox width="25%">
                                <Input
                                    value="{Request_data>/Leader}"
                                    placeholder="Руководитель" />
                                <Button
                                    icon="sap-icon://search"
                                    press="onSearchLeader" />
                            </HBox>
                            <VBox width="50%">
                                <Input
                                    value="{Request_data>/LeaderName}"
                                    placeholder="Руководитель"
                                    enabled="false" />
                            </VBox>
                        </HBox>

                        <!-- Скопировать с -->
                        <HBox justifyContent="Center" alignItems="Center">
                            <VBox width="25%">
                                <Label text="Скопировать с" required="false" />
                            </VBox>
                            <HBox width="25%">
                                <Input
                                    value="{Request_data>/UserCopy}"
                                    placeholder="Скопировать с" />
                                <Button
                                    icon="sap-icon://search"
                                    press="onSearchUserCopy" />
                            </HBox>
                            <VBox width="50%">
                                <Input
                                    value="{Request_data>/UserCopyName}"
                                    placeholder="Скопировать с"
                                    enabled="false" />
                            </VBox>
                        </HBox>
                        <!-- Кнопки -->
                        <HBox class="sapUiSmallMarginTop">
                            <Button
                                text="Скопировать полномочия"
                                press="onCopyPowerOfAttorney"
                                width="200px"
                                class="sapUiSmallMarginEnd" />
                            <Button
                                text="Отправить"
                                press="onSendRequest"
                                type="Emphasized"
                                width="120px"
                                icon="sap-icon://send" />
                        </HBox>
                    </VBox>
                    <VBox class="sapUiFormResGrid sapUiFormBackgrTranslucent" width="60%">
                        <!-- <Table items="{SoglasTable>/0}"
                            mode="None">
                            <headerToolbar>
                                <OverflowToolbar>
                                    <content>
                                        <Title text="Согласование" level="H3" />
                                    </content>
                                </OverflowToolbar>
                            </headerToolbar>
                            <columns>
                                <Column>
                                    <Label text="Полное имя" />
                                </Column>
                                <Column>
                                    <Label text="Рук" />
                                </Column>
                                <Column>
                                    <Label text="Согласование" />
                                </Column>
                                <Column>
                                    <Label text="Комментарий" />
                                </Column>
                                <Column>
                                    <Label text="Тип согласования" />
                                </Column>
                                <Column>
                                    <Label text="ФункНапр" />
                                </Column>
                                <Column>
                                    <Label text="БЕ" />
                                </Column>
                                <Column>
                                    <Label text="Завод" />
                                </Column>
                                <Column>
                                    <Label text="БизнесРоль" />
                                </Column>
                                <Column>
                                    <Label text="Дата" />
                                </Column>
                                <Column>
                                    <Label text="Время" />
                                </Column>
                            </columns>
                            <items> -->
                        <!-- <ColumnListItem>
                                    <cells>
                                        <Text value="{SoglasTable>/Fio}" />
                                        <Text value="{data>Rukov}" />
                                        <Text value="{data>Soglas}" />
                                        <Text value="{data>Comment}" />
                                        <Text value="{data>SoglasType}" />
                                        <Text value="{data>FuncNapr}" />
                                        <Text value="{data>BE}" />
                                        <Text value="{data>Zavod}" />
                                        <Text value="{data>BuisnesRol}" />
                                        <DatePicker
                                            value="{
                                                'path':'data>Date',
                                                'type':'sap.ui.model.type.Date',
                                                'formatOptions': {
                                                    'pattern': 'dd.MM.yyyy'
                                                }
                                            }"
                                            change=".onDateFromChange"
                                            valueFormat="yyyy-MM-dd" />
                                        <TimePicker
                                            value="{data>Time}"
                                            valueFormat="HH:mm"
                                            displayFormat="HH:mm" />
                                    </cells>
                                </ColumnListItem> -->
                        <!-- </items>
                        </Table> -->
                    </VBox>
                </HBox>
                <VBox class="sapUiSmallMarginBottom sapUiFormResGrid sapUiFormBackgrTranslucent">
                    <Table id="roleTable" items="{Request_data>/Guid}"
                        mode="MultiSelect">
                        <headerToolbar>
                            <OverflowToolbar>
                                <content>
                                    <Title text="Запрос полномочий" />
                                    <Button text="Добавить" type="Emphasized" press=".onAddItem" />
                                    <Button text="Копировать" type="Default" press=".onCopyItem" />
                                    <Button text="Удалить" type="Reject" press=".onDeleteItem" />
                                </content>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <!-- Идентификатор -->
                            <Column>
                                <Label text="Ид." />
                            </Column>
                            <!-- Начало -->
                            <Column>
                                <Label text="Начало" required="true" />
                            </Column>
                            <!-- Конец -->
                            <Column>
                                <Label text="Конец" required="true" />
                            </Column>
                            <!-- Функциональное направление -->
                            <Column>
                                <Label text="ФункНапр" />
                            </Column>
                            <!-- Наименование -->
                            <Column>
                                <Label text="Наименован" />
                            </Column>
                            <!-- БизнесРоль (код) -->
                            <Column>
                                <Label text="БизнесРоль" />
                            </Column>
                            <!-- Наименование бизнес-роли -->
                            <Column>
                                <Label text="НаименовБР" />
                            </Column>
                            <!-- 3-д. Имя 1 -->
                            <Column>
                                <Label text="3-д. Имя 1" />
                            </Column>
                            <!-- TkN -->
                            <Column width="6rem">
                                <Label text="TkN" />
                            </Column>
                            <!-- Назв. -->
                            <Column>
                                <Label text="Назв." />
                            </Column>
                            <!-- ПравнРаспр -->
                            <Column>
                                <Label text="ПравнРаспр" />
                            </Column>
                            <!-- НаимПра -->
                            <Column>
                                <Label text="НаимПра" />
                            </Column>
                            <!-- Пользов. -->
                            <Column>
                                <Label text="Пользов." />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{Request_data>Icon}" />
                                </cells>
                                <cells>
                                    <Input value="{Request_data>DataFrom}" type="Date" />
                                </cells>
                                <cells>
                                    <Input value="{Request_data>DataTo}" type="Date" />
                                </cells>
                                <cells>
                                    <HBox>
                                        <Input
                                            value="{Request_data>GroupName}"
                                            placeholder="Руководитель" />
                                        <Button
                                            icon="sap-icon://search"
                                            press="onSearchLeader" />
                                    </HBox>
                                </cells>
                                <cells>
                                    <Text text="{Request_data>BRoleName}" />
                                </cells>
                                <cells>
                                    <Text text="{Request_data>BRole}" />
                                </cells>
                                <cells>
                                    <Text text="{Request_data>BRoleName}" />
                                </cells>
                                <cells>
                                    <Text text="{Request_data>PartnName}" />
                                </cells>
                                <cells>
                                    <Text text="{Request_data>Kokrs}" />
                                </cells>
                                <cells>
                                    <Text text="{Request_data>KokrsName}" />
                                </cells>
                                <cells>
                                    <Text text="{Request_data>Prctr}" />
                                </cells>
                                <cells>
                                    <Text text="{Request_data>PrctrName}" />
                                </cells>
                                <cells>
                                    <Text text="{Request_data>UserCopy}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
            </VBox>
        </content>
        <footer>
            <Toolbar>

            </Toolbar>
        </footer>
    </Page>
</mvc:View>