<mvc:View
    controllerName="com.segezha.form.mpr.controller.Home"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form"
    displayBlock="true">
    <Page id="homePageId">
        <customHeader>
            <Toolbar>
                <ToolbarSpacer />
                <Title text="Создание заявки на запрос полномочий" />
                <ToolbarSpacer />
            </Toolbar>
        </customHeader>
        <content>
            <VBox class="sapUiSmallMargin">
                <HBox class="sapUiSmallMarginBottom">
                    <VBox
                        class="sapUiFormResGrid sapUiFormBackgrTranslucent sapUiSmallMarginEnd"
                        width="40%">
                        <HBox justifyContent="Start" alignItems="Center">
                            <!-- N° Заявки -->
                            <HBox class=" sapUiSmallMarginEnd" justifyContent="Start"
                                alignItems="Center">
                                <Label text="N° Заявки на полномочия" required="false" />
                                <Input
                                    value="{payment>Text}"
                                    enabled="false"
                                    placeholder="N° Заявки на полномочия" />
                            </HBox>
                            <!-- Статус -->
                            <HBox justifyContent="Start" alignItems="Center">
                                <Label text="Статус" required="false" />
                                <Input
                                    value="{
                                        parts: [
                                            {path: 'Text'},
                                            {value: 'Text'}
                                        ],
                                        formatter: '.formatter.formatText'
                                    }"
                                    enabled="false"
                                    placeholder="Автор заявки" />
                            </HBox>
                        </HBox>
                        <HBox justifyContent="Start" alignItems="End">
                            <!-- Автор заявки -->
                            <HBox justifyContent="SpaceBetween" alignItems="Center" width="70%">
                                <Label text="Автор заявки" required="false" />
                                <Input
                                    value="{
                                        parts: [
                                            {path: 'ID'},
                                            {value: 'ID'}
                                        ],
                                        formatter: '.formatter.formatText'
                                    }"
                                    enabled="false"
                                    placeholder="Автор заявки" />
                            </HBox>
                            <VBox class=" sapUiSmallMarginBegin" width="100%">
                                <Input
                                    value="{incoterm>Text}"
                                    enabled="false"
                                    placeholder="Автор заявки" />
                            </VBox>
                        </HBox>
                        <HBox justifyContent="Start" alignItems="End">

                            <!-- Тип пользователя -->
                            <HBox justifyContent="Start" alignItems="Center">
                                <RadioButtonGroup
                                    id="userTypeGroup"
                                    selectedIndex="{data>/userType}"
                                    select=".onUserTypeChange"
                                    columns="2">
                                    <RadioButton text="Существующий пользователь" />
                                    <RadioButton text="Новый пользователь" />
                                </RadioButtonGroup>
                            </HBox>
                        </HBox>
                        <!-- Организация  -->
                        <HBox justifyContent="Start" alignItems="End">
                            <HBox justifyContent="SpaceBetween" alignItems="Center" width="70%">
                                <Label text="Организация" required="false" />
                                <HBox class="">
                                    <Input
                                        value="{data>/selectedIncotermId}"
                                        placeholder="Организация" />
                                    <Button
                                        icon="sap-icon://search"
                                        press="onSearchOrganization" />
                                </HBox>
                            </HBox>
                            <VBox class="sapUiSmallMarginBegin" width="100%">
                                <Input
                                    value="{data>/selectedIncotermText}"
                                    placeholder="Организация"
                                    enabled="false" />
                            </VBox>
                        </HBox>
                        <!-- Завод -->
                        <HBox justifyContent="Start" alignItems="End">
                            <HBox justifyContent="SpaceBetween" alignItems="Center" width="70%">
                                <Label text="Завод" required="false" />
                                <HBox>
                                    <Input
                                        value="{model>plant}"
                                        placeholder="Завод" />
                                    <Button
                                        icon="sap-icon://search"
                                        press="onSearchPlant" />
                                </HBox>
                            </HBox>
                            <VBox class=" sapUiSmallMarginBegin" width="100%">
                                <Input
                                    value="{model>plant}"
                                    placeholder="Завод"
                                    enabled="false" />
                            </VBox>
                        </HBox>
                        <HBox justifyContent="SpaceBetween" alignItems="Center">

                            <!-- Период -->
                            <Label text="Период" required="false" />
                            <VBox class="" width="100%">
                                <DateRangeSelection
                                    displayFormat="dd.MM.yyyy"
                                    class="" />
                            </VBox>
                        </HBox>
                        <HBox justifyContent="Start" alignItems="End">

                            <!-- Пользователь -->
                            <VBox class="sapUiSmallMarginTop">
                                <Label text="Пользователь" required="false" />
                                <HBox>
                                    <Input
                                        value="{model>user}"
                                        placeholder="Пользователь" />
                                    <Button
                                        icon="sap-icon://search"
                                        press="onSearchUser" />
                                </HBox>
                            </VBox>
                            <VBox class=" sapUiSmallMarginBegin" width="90%">
                                <Input
                                    value="{model>user}"
                                    placeholder="Пользователь"
                                    enabled="false" />
                            </VBox>
                        </HBox>

                        <!-- Фамилия -->
                        <VBox class="">
                            <Label text="Фамилия" required="false" />
                            <Input
                                value="{data>/lastName}"
                                enabled="{= ${data>/userType} === 1 }"
                                placeholder="Фамилия" />
                        </VBox>

                        <!-- Имя -->
                        <VBox class="">
                            <Label text="Имя" required="false" />
                            <Input
                                value="{model>firstName}"
                                enabled="{= ${data>/userType} === 1 }"
                                placeholder="Имя" />
                        </VBox>

                        <!-- Отчество -->
                        <VBox class="">
                            <Label text="Отчество" required="false" />
                            <Input
                                value="{model>middleName}"
                                enabled="{= ${data>/userType} === 1 }"
                                placeholder="Отчество" />
                        </VBox>

                        <!-- Отдел -->
                        <VBox class="">
                            <Label text="Отдел" required="false" />
                            <Input
                                value="{model>department}"
                                enabled="{= ${data>/userType} === 1 }"
                                placeholder="Отдел" />
                        </VBox>

                        <!-- Должность -->
                        <VBox class="">
                            <Label text="Должность" required="false" />
                            <Input
                                value="{model>position}"
                                enabled="{= ${data>/userType} === 1 }"
                                placeholder="Должность" />
                        </VBox>

                        <!-- Адрес эл. почты -->
                        <VBox class="">
                            <Label text="Адрес эл. почты" required="false" />
                            <Input
                                value="{model>email}"
                                type="Email"
                                enabled="{= ${data>/userType} === 1 }"
                                placeholder="Адрес эл. почты" />
                        </VBox>
                        <!-- Руководитель -->
                        <HBox justifyContent="Start" alignItems="End">
                            <VBox class="">
                                <Label text="Руководитель" required="false" />
                                <HBox>
                                    <Input
                                        value="{model>manager}"
                                        placeholder="Руководитель" />
                                    <Button
                                        icon="sap-icon://search"
                                        press="onSearchManager" />
                                </HBox>
                            </VBox>
                            <VBox class=" sapUiSmallMarginBegin" width="90%">
                                <Input
                                    value="{model>manager}"
                                    placeholder="Руководитель"
                                    enabled="false" />
                            </VBox>
                        </HBox>
                        <HBox justifyContent="Start" alignItems="End">

                            <!-- Скопировать с -->
                            <VBox class="sapUiSmallMarginTop">
                                <Label text="Скопировать с" required="false" />
                                <HBox>

                                    <Input
                                        value="{model>copyFrom}"
                                        placeholder="Скопировать с" />
                                    <Button
                                        icon="sap-icon://search"
                                        press="onSearchcopyFrom" />
                                </HBox>
                            </VBox>
                            <VBox class=" sapUiSmallMarginBegin" width="90%">
                                <Input
                                    value="{model>copyFrom}"
                                    placeholder="Скопировать с"
                                    enabled="false" />
                            </VBox>
                        </HBox>
                        <!-- Кнопка "Скопировать полномочия" -->
                        <Button
                            text="Скопировать полномочия"
                            press="onCopyPowerOfAttorney"
                            width="200px"
                            class="sapUiSmallMarginTop" />
                    </VBox>
                    <VBox class="sapUiFormResGrid sapUiFormBackgrTranslucent" width="60%">
                        <Table items="{SoglasTable>/0}"
                            mode="None">
                            <headerToolbar>
                                <OverflowToolbar>
                                    <content>
                                        <Title text="Согласование" level="H3" />
                                    </content>
                                </OverflowToolbar>
                            </headerToolbar>
                            <columns>
                                <Column>
                                    <Label text="Полное имя" />
                                </Column>
                                <Column>
                                    <Label text="Рук" />
                                </Column>
                                <Column>
                                    <Label text="Согласование" />
                                </Column>
                                <Column>
                                    <Label text="Комментарий" />
                                </Column>
                                <Column>
                                    <Label text="Тип согласования" />
                                </Column>
                                <Column>
                                    <Label text="ФункНапр" />
                                </Column>
                                <Column>
                                    <Label text="БЕ" />
                                </Column>
                                <Column>
                                    <Label text="Завод" />
                                </Column>
                                <Column>
                                    <Label text="БизнесРоль" />
                                </Column>
                                <Column>
                                    <Label text="Дата" />
                                </Column>
                                <Column>
                                    <Label text="Время" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem>
                                    <cells>
                                        <Text value="{SoglasTable>/Fio}" />
                                        <Text value="{data>Rukov}" />
                                        <Text value="{data>Soglas}" />
                                        <Text value="{data>Comment}" />
                                        <Text value="{data>SoglasType}" />
                                        <Text value="{data>FuncNapr}" />
                                        <Text value="{data>BE}" />
                                        <Text value="{data>Zavod}" />
                                        <Text value="{data>BuisnesRol}" />
                                        <DatePicker
                                            value="{
                                                'path':'data>Date',
                                                'type':'sap.ui.model.type.Date',
                                                'formatOptions': {
                                                    'pattern': 'dd.MM.yyyy'
                                                }
                                            }"
                                            change=".onDateFromChange"
                                            valueFormat="yyyy-MM-dd" />
                                        <TimePicker
                                            value="{data>Time}"
                                            valueFormat="HH:mm"
                                            displayFormat="HH:mm" />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </VBox>
                </HBox>
                <VBox class="sapUiSmallMarginBottom sapUiFormResGrid sapUiFormBackgrTranslucent">
                    <Table items="{state>/tables/defect/items}"
                        mode="MultiSelect">
                        <headerToolbar>
                            <OverflowToolbar>
                                <content>
                                    <Title text="Запрос полномочий" />

                                </content>
                            </OverflowToolbar>
                        </headerToolbar>
                        <columns>
                            <!-- Идентификатор -->
                            <Column>
                                <Label text="Ид." />

                            </Column>

                            <!-- Начало -->
                            <Column>
                                <Label text="Начало" required="true" />
                            </Column>

                            <!-- Конец -->
                            <Column>
                                <Label text="Конец" required="true" />
                            </Column>

                            <!-- Функциональное направление -->
                            <Column>
                                <Label text="ФункНапр" />
                            </Column>

                            <!-- Наименование -->
                            <Column>
                                <Label text="Наименован" />
                            </Column>

                            <!-- БизнесРоль (код) -->
                            <Column>
                                <Label text="БизнесРоль" />

                            </Column>

                            <!-- Наименование бизнес-роли -->
                            <Column>
                                <Label text="НаименовБР" />

                            </Column>

                            <!-- 3-д. Имя 1 -->
                            <Column>
                                <Label text="3-д. Имя 1" />

                            </Column>

                            <!-- TkN -->
                            <Column>
                                <Label text="TkN" />

                            </Column>

                            <!-- Назв. -->
                            <Column>
                                <Label text="Назв." />

                            </Column>

                            <!-- ПравнРаспр -->
                            <Column>
                                <Label text="ПравнРаспр" />

                            </Column>

                            <!-- НаимПра -->
                            <Column>
                                <Label text="НаимПра" />

                            </Column>

                            <!-- Пользов. -->
                            <Column>
                                <Label text="Пользов." />

                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>

                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
            </VBox>
        </content>
        <footer>
            <Toolbar>

            </Toolbar>
        </footer>
    </Page>
</mvc:View>